<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Dynamic Controllable Parameters</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/prism.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/utils.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>
<script src="assets/js/navigation.js"></script>


<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/trie.js"></script>


<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body data-spy="scroll" data-target=".scrollspy" data-offset="70">


<nav class="navbar navbar-fixed-top navbar-default">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a href="https://gstreamer.freedesktop.org/" class="hotdoc-navbar-brand">
				<img src="assets/images/gstreamer-logo.svg" alt="Home" id="home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
							</ul>
		</div>
	</div>
</nav>

<main class="page-row page-row-expanded">
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="GStreamer-doc-1.0" data-hotdoc-ref="application-development/advanced/dparams.html" class="page_container" id="page-wrapper">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2" id="sidenav-column">
	<div class="panel panel-collapse" id="sidenav" data-hotdoc-role="navigation">
		<div id="sidenav-search" role="search">
			<input type="text" class="form-control" placeholder="Fetching index" id="sidenav-lookup-field" disabled>
		</div>
		<div id="sitenav-wrapper" class="mCustomScrollbar" data-mcs-theme="minimal">
			<div class="sidenav-main-panel-body">
				<div id="site-navigation">
				</div>
			</div>
			<!-- FIXME -->
			<div style="height: 76px;"></div>
		</div>
	</div>
</div>

<div class="col-sm-12 col-md-9 col-xl-8">
	<div id="main">
				
<div id="page-description" data-hotdoc-source="dparams.md">
<h1 id="dynamic-controllable-parameters">Dynamic Controllable Parameters</h1>
<h2 id="getting-started">Getting Started</h2>
<p>The controller subsystem offers a lightweight way to adjust gobject
properties over stream-time. Normally these properties are changed using
<code>g_object_set()</code>. Timing those calls reliably so that the changes affect
certain stream times is close to impossible. The controller takes time
into account. It works by attaching control-sources to properties using
control-bindings. Control-sources provide values for a given time-stamp
that are usually in the range of 0.0 to 1.0. Control-bindings map the
control-value to a gobject property they are bound to - converting the
type and scaling to the target property value range. At run-time the
elements continuously pull values changes for the current stream-time to
update the gobject properties. GStreamer includes a few different
control-sources and control-bindings already, but applications can
define their own by sub-classing from the respective base classes.</p>
<p>Most parts of the controller mechanism is implemented in GstObject. Also
the base classes for control-sources and control-bindings are included
in the core library. The existing implementations are contained within
the <code>gstcontroller</code> library. You need to include the header in your
application's source file:</p>
<pre><code class="language-c">...
#include &lt;gst/gst.h&gt;
#include &lt;gst/controller/gstinterpolationcontrolsource.h&gt;
#include &lt;gst/controller/gstdirectcontrolbinding.h&gt;
...

</code></pre>
<p>Your application should link to the shared library
<code>gstreamer-controller</code>. One can get the required flag for compiler and
linker by using pkg-config for gstreamer-controller-1.0.</p>
<h2 id="setting-up-parameter-control">Setting up parameter control</h2>
<p>If we have our pipeline set up and want to control some parameters, we
first need to create a control-source. Lets use an interpolation
control-source:</p>
<pre><code class="language-c">  csource = gst_interpolation_control_source_new ();
  g_object_set (csource, "mode", GST_INTERPOLATION_MODE_LINEAR, NULL);

</code></pre>
<p>Now we need to attach the control-source to the gobject property. This
is done with a control-binding. One control source can be attached to
several object properties (even in different objects) using separate
control-bindings.</p>
<pre><code class="language-c">      gst_object_add_control_binding (object, gst_direct_control_binding_new (object, "prop1", csource));

</code></pre>
<p>This type control-source takes new property values from a list of
time-stamped parameter changes. The source can e.g. fill gaps by
smoothing parameter changes This behavior can be configured by setting
the mode property of the control-source. Other control sources e.g.
produce a stream of values by calling <code>sin()</code> function. They have
parameters to control e.g. the frequency. As control-sources are
GstObjects too, one can attach control-sources to these properties too.</p>
<p>Now we can set some control points. These are time-stamped gdouble
values and are usually in the range of 0.0 to 1.0. A value of 1.0 is
later mapped to the maximum value in the target properties value range.
The values become active when the timestamp is reached. They still stay
in the list. If e.g. the pipeline runs a loop (using a segmented seek),
the control-curve gets repeated as
well.</p>
<pre><code class="language-c">  GstTimedValueControlSource *tv_csource = (GstTimedValueControlSource *)csource;
  gst_timed_value_control_source_set (tv_csource, 0 * GST_SECOND, 0.0);
  gst_timed_value_control_source_set (tv_csource, 1 * GST_SECOND, 1.0);

</code></pre>
<p>Now everything is ready to play. If the control-source is e.g. bound to
a volume property, we will head a fade-in over 1 second. One word of
caution, the volume element that comes with gstreamer has a value range
of 0.0 to 4.0 on its volume property. If the above control-source is
attached to the property the volume will ramp up to 400%!</p>
<p>One final note - the controller subsystem has a built-in live-mode. Even
though a property has a control-source assigned one can change the
GObject property through the <code>g_object_set()</code>. This is highly useful
when binding the GObject properties to GUI widgets. When the user
adjusts the value with the widget, one can set the GObject property and
this remains active until the next programmed control-source value
overrides it. This also works with smoothed parameters. It does not work
for control-sources that constantly update the property (e.g. the
lfo_control_source).</p>

</div>


	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
</div>
<div class="hidden-xs col-xl-2">
</div>
	</div>
</div>
</main>

<footer class="page-row">
	<div class="container-fluid">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2"></div>
		<div class="col-sm-12 col-md-9 col-xl-8">
						
		</div>
		<div class="hidden-xs col-xl-2"></div>
	</div>
</div>
</footer>

</body>

<script src="assets/js/navbar_offset_scroller.js"></script>
</html>