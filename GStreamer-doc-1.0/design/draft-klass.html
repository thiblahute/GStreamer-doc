<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Element Klass definition</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/devhelp.css" type="text/css">
<link rel="stylesheet" href="assets/css/prism.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/utils.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>
<script src="assets/js/navigation.js"></script>


<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/trie.js"></script>


<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body data-spy="scroll" data-target=".scrollspy" data-offset="70">


<nav class="navbar navbar-fixed-top navbar-default">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a href="https://gstreamer.freedesktop.org/" class="hotdoc-navbar-brand">
				<img src="assets/images/gstreamer-logo.svg" alt="Home" id="home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
							</ul>
		</div>
	</div>
</nav>

<main class="page-row page-row-expanded">
<div data-extension="core" data-hotdoc-project="GStreamer-doc-1.0" data-hotdoc-ref="design/draft-klass.html" class="page_container" id="page-wrapper">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2" id="sidenav-column">
	<div class="panel panel-collapse" id="sidenav" data-hotdoc-role="navigation">
		<div id="sidenav-search" role="search">
			<input type="text" class="form-control" placeholder="Fetching index" id="sidenav-lookup-field" disabled>
		</div>
		<div id="sitenav-wrapper" class="mCustomScrollbar" data-mcs-theme="minimal">
			<div class="sidenav-main-panel-body">
				<div id="site-navigation">
				</div>
			</div>
			<!-- FIXME -->
			<div style="height: 76px;"></div>
		</div>
	</div>
</div>

<div class="col-sm-12 col-md-9 col-xl-8">
	<div id="main">
				
<div id="page-description" data-hotdoc-source="draft-klass.md">
<h1 id="element-klass-definition">Element Klass definition</h1>
<h2 id="purpose">Purpose</h2>
<p>Applications should be able to retrieve elements from the registry of
existing elements based on specific capabilities or features of the
element.</p>
<p>A playback application might want to retrieve all the elements that can
be used for visualisation, for example, or a video editor might want to
select all video effect filters.</p>
<p>The topic of defining the klass of elements should be based on use
cases.</p>
<p>A list of classes that are used in a installation can be generated
using: gst-inspect-1.0 -a | grep -ho Class:.* | cut -c8- | sed
"s/\//\\n/g" | sort | uniq</p>
<h2 id="proposal">Proposal</h2>
<p>The GstElementDetails contains a field named klass that is a pointer to
a string describing the element type.</p>
<p>In this document we describe the format and contents of the string.
Elements should adhere to this specification although that is not
enforced to allow for wild (application specific) customisation.</p>
<p>###string format</p>
<pre><code>&lt;keyword&gt;['/'&lt;keyword]*

The string consists of an _unordered_ list of keywords separated with a '/'
character. While the / suggests a hierarchy, this is _not_ the case.
</code></pre>
<h3 id="keyword-categories">keyword categories</h3>
<ul>
<li>
<p>functional</p>
<p>Categories are base on <em>intended usage</em> of the element. Some elements
might have other side-effects (especially for filers/effects). The purpose
is to list enough keywords so that applications can do meaningful filtering,
not to completely describe the functionality, that is expressed in caps etc..</p>
<ul>
<li>
<p>Source : produces data</p>
</li>
<li>
<p>Sink : consumes data</p>
</li>
<li>
<p>Filter : filters/transforms data, no modification on the data is
intended (although it might be unavoidable). The filter can
decide on input and output caps independently of the stream
contents (GstBaseTransform).</p>
</li>
<li>
<p>Effect : applies an effect to some data, changes to data are
intended. Examples are colorbalance, volume. These elements can
also be implemented with GstBaseTransform.</p>
</li>
<li>
<p>Demuxer : splits audio, video, … from a stream</p>
</li>
<li>
<p>Muxer : interleave audio, video, … into one stream, this is like
mixing but without losing or degrading each separate input
stream. The reverse operation is possible with a Demuxer that
reproduces the exact same input streams.</p>
</li>
<li>
<p>Decoder : decodes encoded data into a raw format, there is
typically no relation between input caps and output caps. The
output caps are defined in the stream data. This separates the
Decoder from the Filter and Effect.</p>
</li>
<li>
<p>Encoder : encodes raw data into an encoded format.</p>
</li>
<li>
<p>Mixer : combine audio, video, .. this is like muxing but with
applying some algorithm so that the individual streams are not
extractable anymore, there is therefore no reverse operation to
mixing. (audio mixer, video mixer, …)</p>
</li>
<li>
<p>Converter : convert audio into video, text to audio, … The
converter typically works on raw types only. The source media
type is listed first.</p>
</li>
<li>
<p>Analyzer : reports about the stream contents.</p>
</li>
<li>
<p>Control : controls some aspect of a hardware device</p>
</li>
<li>
<p>Extracter : extracts tags/headers from a stream</p>
</li>
<li>
<p>Formatter : adds tags/headers to a stream</p>
</li>
<li>
<p>Connector : allows for new connections in the pipeline. (tee, …)</p>
</li>
<li>
<p>…</p>
</li>
</ul>
</li>
<li>
<p>Based on media type</p>
<p>Purpose is to make a selection for elements operating on the different
types of media. An audio application must be able to filter out the
elements operating on audio, for example.</p>
<ul>
<li>
<p>Audio : operates on audio data</p>
</li>
<li>
<p>Video : operates on video data</p>
</li>
<li>
<p>Image : operates on image data. Usually this media type can also
be used to make a video stream in which case it is added
together with the Video media type.</p>
</li>
<li>
<p>Text : operates on text data</p>
</li>
<li>
<p>Metadata : operates on metadata</p>
</li>
<li>
<p>…</p>
</li>
</ul>
</li>
<li>
<p>Extra features</p>
<p>The purpose is to further specialize the element, mostly for
application specific needs.</p>
<ul>
<li>
<p>Network : element is used in networked situations</p>
</li>
<li>
<p>Protocol : implements some protocol (RTSP, HTTP, …)</p>
</li>
<li>
<p>Payloader : encapsulate as payload (RTP, RDT,.. )</p>
</li>
<li>
<p>Depayloader : strip a payload (RTP, RDT,.. )</p>
</li>
<li>
<p>RTP : intended to be used in RTP applications</p>
</li>
<li>
<p>Device : operates on some hardware device (disk, network, audio
card, video card, usb, …)</p>
</li>
<li>
<p>Visualisation : intended to be used for audio visualisation</p>
</li>
<li>
<p>Debug : intended usage is more for debugging purposes.</p>
</li>
</ul>
</li>
<li>
<p>Categories found, but not yet in one of the above lists</p>
<ul>
<li>
<p>Bin : playbin, decodebin, bin, pipeline</p>
</li>
<li>
<p>Codec : lots of decoders, encoder, demuxers should be removed?</p>
</li>
<li>
<p>Generic : should be removed?</p>
</li>
<li>
<p>File : like network, should go to Extra?</p>
</li>
<li>
<p>Editor : gnonlin, textoverlays</p>
</li>
<li>
<p>DVD, GDP, LADSPA, Parser, Player, Subtitle, Testing, …</p>
</li>
</ul>
</li>
</ul>
<p>3) suggested order:</p>
<pre><code>&lt;functional&gt;[/&lt;media type&gt;]*[/&lt;extra...&gt;]*
</code></pre>
<p>4) examples:</p>
<pre><code>apedemux         : Extracter/Metadata
audiotestsrc     : Source/Audio
autoaudiosink    : Sink/Audio/Device
cairotimeoverlay : Mixer/Video/Text
dvdec            : Decoder/Video
dvdemux          : Demuxer
goom             : Converter/Audio/Video
id3demux         : Extracter/Metadata
udpsrc           : Source/Network/Protocol/Device
videomixer       : Mixer/Video
videoconvert     : Filter/Video             (intended use to convert video with as little
                                             visible change as possible)
vertigotv        : Effect/Video             (intended use is to change the video)
volume           : Effect/Audio             (intended use is to change the audio data)
vorbisdec        : Decoder/Audio
vorbisenc        : Encoder/Audio
oggmux           : Muxer
adder            : Mixer/Audio
videobox         : Effect/Video
alsamixer        : Control/Audio/Device
audioconvert     : Filter/Audio
audioresample    : Filter/Audio
xvimagesink      : Sink/Video/Device
navseek          : Filter/Debug
decodebin        : Decoder/Demuxer
level            : Filter/Analyzer/Audio
tee              : Connector/Debug
</code></pre>
<h3 id="open-issues">open issues:</h3>
<ul>
<li>how to differentiate physical devices from logical ones?
autoaudiosink : Sink/Audio/Device alsasink : Sink/Audio/Device</li>
</ul>
<h2 id="use-cases">Use cases</h2>
<ul>
<li>
<p>get a list of all elements implementing a video effect (pitivi):</p>
<pre><code>  klass.contains (Effect &amp; Video)
</code></pre>
</li>
<li>
<p>get list of muxers (pitivi):</p>
<pre><code>  klass.contains (Muxer)
</code></pre>
</li>
<li>
<p>get list of video encoders (pitivi):</p>
<pre><code>  klass.contains (Encoder &amp; video)
</code></pre>
</li>
<li>
<p>Get a list of all audio/video visualisations (totem):</p>
<pre><code>  klass.contains (Visualisation)
</code></pre>
</li>
<li>
<p>Get a list of all decoders/demuxer/metadata parsers/vis (playbin):</p>
<pre><code>  klass.contains (Visualisation | Demuxer | Decoder | (Extractor &amp; Metadata))
</code></pre>
</li>
<li>
<p>Get a list of elements that can capture from an audio device
(gst-properties):</p>
<pre><code>  klass.contains (Source &amp; Audio &amp; Device)
</code></pre>
<ul>
<li>filters out audiotestsrc, since it is not a device</li>
</ul>
</li>
</ul>

</div>


	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
</div>
<div class="hidden-xs col-xl-2">
</div>
	</div>
</div>
</main>

<footer class="page-row">
	<div class="container-fluid">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2"></div>
		<div class="col-sm-12 col-md-9 col-xl-8">
						
		</div>
		<div class="hidden-xs col-xl-2"></div>
	</div>
</div>
</footer>

</body>

<script src="assets/js/navbar_offset_scroller.js"></script>
</html>