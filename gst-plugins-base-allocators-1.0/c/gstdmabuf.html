<html lang="en">
<head>

<base href="../..">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>GstDmaBufAllocator</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/extra_frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/prism.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>

<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/trie.js"></script>

<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
" data-spy="scroll" data-target="#toc" data-offset="70">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<form action="" class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/gstreamer-logo.svg" alt="Home" id="home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
				
<li class="dropdown">
    <a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        API References<span class="caret"></span>
    </a>
	<ul class="dropdown-menu" id="modules-menu">
					<li>
				<a href="libgstreamer-1.0/c/index.html">GStreamer core</a>
			</li>
					<li>
				<a href="libs.html">GStreamer Libraries</a>
			</li>
					<li>
				<a href="plugins_doc.html">GStreamer Plugins</a>
			</li>
		</ul>
</li>

<li>
    <a href="application-development/index.html">Application manual</a>
</li>


<li>
    <a href="tutorials/index.html">Tutorials</a>
</li>

			</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
							</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="gi-extension" data-hotdoc-in-toplevel="False" data-hotdoc-project="gst-plugins-base-allocators-1.0" data-hotdoc-ref="gstdmabuf.html" class="page_container" id="page-wrapper" data-hotdoc-meta-gi-languages="c,python,javascript" data-hotdoc-meta-gi-language="c">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/navigation.js"></script>
			<script src="assets/js/c-sitemap.js"></script>
	</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-source="gstdmabuf.h" data-hotdoc-role="main">
        <h1 id="gstdmabufallocator">GstDmaBufAllocator</h1>
    </div>
        

            <h2 class="symbol_section" id="">GstDmaBufAllocator</h2>
        

                    

<div class="base_symbol_container" data-hotdoc-tags="since:1.12;" id="GstDmaBufAllocator">
			
		<div class="hierarchy_container">
	<div class="hierarchy_details">
<pre>
<a title="GObject" href="https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#GObject-struct">GObject</a>
    <span class="lineart">╰──</span><a title="GInitiallyUnowned" href="https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#GInitiallyUnowned">GInitiallyUnowned</a>
        <span class="lineart">╰──</span><a title="GstObject" href="libgstreamer-1.0/c/gstobject.html#GstObject">GstObject</a>
            <span class="lineart">╰──</span><a title="GstAllocator" href="libgstreamer-1.0/c/gstallocator.html#GstAllocator">GstAllocator</a>
                <span class="lineart">╰──</span><a title="GstFdAllocator" href="gst-plugins-base-allocators-1.0/c/gstfdmemory.html#GstFdAllocator">GstFdAllocator</a>
                    <span class="lineart">╰──</span>GstDmaBufAllocator
</pre>

</div>

</div>

<div class="class_details">
	<p>Base class for allocators with dmabuf-backed memory</p>

</div>

	<div class="member_details">
		<span><b>Members</b></span>
		<div class="container-fluid">
						
<div class="row" id="GstDmaBufAllocator.parent">
	<div class="col-sm-12 col-md-2">
		<p>
		<i><em><code>GstDmaBufAllocator.parent:</code></em></i>
		</p>
	</div>
	<div class="col-sm-12 col-md-8 field-description">
		
	</div>
	<div class="col-sm-12 col-md-2 field-link">
		<a title="GstFdAllocator" href="gst-plugins-base-allocators-1.0/c/gstfdmemory.html#GstFdAllocator">GstFdAllocator</a>
	</div>
</div>

						
<div class="row" id="GstDmaBufAllocator._gst_reserved">
	<div class="col-sm-12 col-md-2">
		<p>
		<i><em><code>GstDmaBufAllocator._gst_reserved:</code></em></i>
		</p>
	</div>
	<div class="col-sm-12 col-md-8 field-description">
		
	</div>
	<div class="col-sm-12 col-md-2 field-link">
		<a title="gpointer" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gpointer">gpointer</a>
	</div>
</div>

					</div>
	</div>


</div>




            <h3 class="symbol_section" id="GstDmaBufAllocatorConstructors">Constructors</h3>
                    

<div class="base_symbol_container" data-hotdoc-tags="since:1.2;" id="gst_dmabuf_allocator_new">
		
<h4 id="gst_dmabuf_allocator_new1">
	<span><code>gst_dmabuf_allocator_new</code></span>
</h4>

		

<pre class="prototype">
<a title="GstAllocator" href="libgstreamer-1.0/c/gstallocator.html#GstAllocator">GstAllocator</a> *
gst_dmabuf_allocator_new ()</pre>

<p>Return a new dmabuf allocator.</p>




	<div class="multi_return_value_container">
		<span><b>Returns:<b></b></b></span>
		<div class="container-fluid">
				
<div class="row">
	<div class="col-sm-12 col-md-2">
		<p>
				</p>
	</div>
	<div class="col-sm-12 col-md-6 return-value-description">
		<p>a new dmabuf allocator, or NULL if the allocator
isn't available. Use <a href="libgstreamer-1.0/c/gstobject.html#gst_object_unref">gst_object_unref</a> to release the allocator after
usage</p>

	</div>
	<div class="col-sm-12 col-md-2 return-value-link">
		<a title="GstAllocator" href="libgstreamer-1.0/c/gstallocator.html#GstAllocator">GstAllocator</a> *
	</div>
	<div class="col-sm-12 col-md-2 return-value-extra">
				
<span class="annotation">[<abbr title="Free data after the code is done"><span class="acronym">transfer: full</span></abbr>]</span>

				
	</div>
</div>

			</div>
</div>



	<p>
	Since			: 1.2
		</p>

</div>




            <h3 class="symbol_section" id="GstDmaBufAllocatorFunctions">Functions</h3>
                    

<div class="base_symbol_container" data-hotdoc-tags="since:1.2;" id="gst_dmabuf_allocator_alloc">
		
<h4 id="gst_dmabuf_allocator_alloc1">
	<span><code>gst_dmabuf_allocator_alloc</code></span>
</h4>

		

<pre class="prototype">
<a title="GstMemory" href="libgstreamer-1.0/c/gstmemory.html#GstMemory">GstMemory</a> *
gst_dmabuf_allocator_alloc (<a title="GstAllocator" href="libgstreamer-1.0/c/gstallocator.html#GstAllocator">GstAllocator</a> * allocator,
                            <a title="gint" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gint">gint</a> fd,
                            <a title="gsize" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gsize">gsize</a> size)</pre>

<p>Return a <a href="libgstreamer-1.0/c/gstmemory.html#GstMemory">GstMemory</a> that wraps a dmabuf file descriptor.</p>



	<div class="parameter_container">
		<span><b>Parameters:</b></span>
		<div class="container-fluid">
							
<div class="row">
	<div class="col-sm-12 col-md-2">
			<p>
		<i><em><code>allocator:</code></em></i>
		</p>
		</div>
	<div class="col-sm-12 col-md-8 parameter-description">
	<p>allocator to be used for this memory</p>

	</div>
	<div class="col-sm-12 col-md-2 parameter-extra">
		

		</div>
</div>

							
<div class="row">
	<div class="col-sm-12 col-md-2">
			<p>
		<i><em><code>fd:</code></em></i>
		</p>
		</div>
	<div class="col-sm-12 col-md-8 parameter-description">
	<p>dmabuf file descriptor</p>

	</div>
	<div class="col-sm-12 col-md-2 parameter-extra">
		

		</div>
</div>

							
<div class="row">
	<div class="col-sm-12 col-md-2">
			<p>
		<i><em><code>size:</code></em></i>
		</p>
		</div>
	<div class="col-sm-12 col-md-8 parameter-description">
	<p>memory size</p>

	</div>
	<div class="col-sm-12 col-md-2 parameter-extra">
		

		</div>
</div>

					</div>
	</div>

	<div class="multi_return_value_container">
		<span><b>Returns:<b></b></b></span>
		<div class="container-fluid">
				
<div class="row">
	<div class="col-sm-12 col-md-2">
		<p>
				</p>
	</div>
	<div class="col-sm-12 col-md-6 return-value-description">
		<p>a GstMemory based on <em>allocator</em>.
When the buffer will be released dmabuf allocator will close the <em>fd</em>.
The memory is only mmapped on gst_buffer_mmap request.</p>

	</div>
	<div class="col-sm-12 col-md-2 return-value-link">
		<a title="GstMemory" href="libgstreamer-1.0/c/gstmemory.html#GstMemory">GstMemory</a> *
	</div>
	<div class="col-sm-12 col-md-2 return-value-extra">
				
<span class="annotation">[<abbr title="Free data after the code is done"><span class="acronym">transfer: full</span></abbr>]</span>

				
	</div>
</div>

			</div>
</div>



	<p>
	Since			: 1.2
		</p>

</div>




            <h3 class="symbol_section" id="GstDmaBufAllocatorStructures">Structures</h3>
                    

<div class="base_symbol_container" data-hotdoc-tags="" id="GstDmaBufAllocatorClass">
		
<h4 id="struct-gstdmabufallocatorclass">
		struct GstDmaBufAllocatorClass
	</h4>

		<pre class="raw_code">
struct GstDmaBufAllocatorClass {
    GstFdAllocatorClass parent_class;
    gpointer _gst_reserved; /* &lt; private &gt; */
};
</pre>


	<div class="member_details">
		<span><b>Fields</b></span>
		<div class="container-fluid">
						
<div class="row" id="GstDmaBufAllocatorClass.parent_class">
	<div class="col-sm-12 col-md-2">
		<p>
		<i><em><code>GstDmaBufAllocatorClass.parent_class:</code></em></i>
		</p>
	</div>
	<div class="col-sm-12 col-md-8 field-description">
		
	</div>
	<div class="col-sm-12 col-md-2 field-link">
		<a title="GstFdAllocatorClass" href="gst-plugins-base-allocators-1.0/c/gstfdmemory.html#GstFdAllocatorClass">GstFdAllocatorClass</a>
	</div>
</div>

						
<div class="row" id="GstDmaBufAllocatorClass._gst_reserved">
	<div class="col-sm-12 col-md-2">
		<p>
		<i><em><code>GstDmaBufAllocatorClass._gst_reserved:</code></em></i>
		</p>
	</div>
	<div class="col-sm-12 col-md-8 field-description">
		
	</div>
	<div class="col-sm-12 col-md-2 field-link">
		<a title="gpointer" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gpointer">gpointer</a>
	</div>
</div>

					</div>
	</div>


</div>



        



            <h2 class="symbol_section" id="Functions">Functions</h2>
                    

<div class="base_symbol_container" data-hotdoc-tags="since:1.2;" id="gst_dmabuf_memory_get_fd">
		
<h3 id="gst_dmabuf_memory_get_fd1">
	<span><code>gst_dmabuf_memory_get_fd</code></span>
</h3>

		

<pre class="prototype">
<a title="gint" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gint">gint</a>
gst_dmabuf_memory_get_fd (<a title="GstMemory" href="libgstreamer-1.0/c/gstmemory.html#GstMemory">GstMemory</a> * mem)</pre>

<p>Return the file descriptor associated with <em>mem</em>.</p>



	<div class="parameter_container">
		<span><b>Parameters:</b></span>
		<div class="container-fluid">
							
<div class="row">
	<div class="col-sm-12 col-md-2">
			<p>
		<i><em><code>mem:</code></em></i>
		</p>
		</div>
	<div class="col-sm-12 col-md-8 parameter-description">
	<p>the memory to get the file descriptor</p>

	</div>
	<div class="col-sm-12 col-md-2 parameter-extra">
		

		</div>
</div>

					</div>
	</div>

	<div class="multi_return_value_container">
		<span><b>Returns:<b></b></b></span>
		<div class="container-fluid">
				
<div class="row">
	<div class="col-sm-12 col-md-2">
		<p>
				</p>
	</div>
	<div class="col-sm-12 col-md-6 return-value-description">
		<p>the file descriptor associated with the memory, or -1.  The file
descriptor is still owned by the GstMemory.  Use dup to take a copy
if you intend to use it beyond the lifetime of this GstMemory.</p>

	</div>
	<div class="col-sm-12 col-md-2 return-value-link">
		<a title="gint" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gint">gint</a>
	</div>
	<div class="col-sm-12 col-md-2 return-value-extra">
				

				
	</div>
</div>

			</div>
</div>



	<p>
	Since			: 1.2
		</p>

</div>

            

<div class="base_symbol_container" data-hotdoc-tags="since:1.2;" id="gst_is_dmabuf_memory">
		
<h3 id="gst_is_dmabuf_memory1">
	<span><code>gst_is_dmabuf_memory</code></span>
</h3>

		

<pre class="prototype">
<a title="gboolean" href="gst-plugins-base-riff-1.0/riff-read.html#gboolean">gboolean</a>
gst_is_dmabuf_memory (<a title="GstMemory" href="libgstreamer-1.0/c/gstmemory.html#GstMemory">GstMemory</a> * mem)</pre>

<p>Check if <em>mem</em> is dmabuf memory.</p>



	<div class="parameter_container">
		<span><b>Parameters:</b></span>
		<div class="container-fluid">
							
<div class="row">
	<div class="col-sm-12 col-md-2">
			<p>
		<i><em><code>mem:</code></em></i>
		</p>
		</div>
	<div class="col-sm-12 col-md-8 parameter-description">
	<p>the memory to be check</p>

	</div>
	<div class="col-sm-12 col-md-2 parameter-extra">
		

		</div>
</div>

					</div>
	</div>

	<div class="multi_return_value_container">
		<span><b>Returns:<b></b></b></span>
		<div class="container-fluid">
				
<div class="row">
	<div class="col-sm-12 col-md-2">
		<p>
				</p>
	</div>
	<div class="col-sm-12 col-md-6 return-value-description">
		<p><a href="https://developer.gnome.org/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS">TRUE</a> if <em>mem</em> is dmabuf memory, otherwise <a href="https://developer.gnome.org/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS">FALSE</a></p>

	</div>
	<div class="col-sm-12 col-md-2 return-value-link">
		<a title="gboolean" href="gst-plugins-base-riff-1.0/riff-read.html#gboolean">gboolean</a>
	</div>
	<div class="col-sm-12 col-md-2 return-value-extra">
				

				
	</div>
</div>

			</div>
</div>



	<p>
	Since			: 1.2
		</p>

</div>




            <h2 class="symbol_section" id="Function_Macros">Function Macros</h2>
                    

<div class="base_symbol_container" data-hotdoc-tags="" id="GST_DMABUF_ALLOCATOR_CAST">
		
<h3 id="gst_dmabuf_allocator_cast">
	<span><code>GST_DMABUF_ALLOCATOR_CAST</code></span>
</h3>

		<pre class="raw_code">
#define GST_DMABUF_ALLOCATOR_CAST(obj)         ((GstDmaBufAllocator *)(obj))
</pre>








</div>




            <h2 class="symbol_section" id="Constants">Constants</h2>
                    

<div class="base_symbol_container" data-hotdoc-tags="since:1.11;" id="GST_CAPS_FEATURE_MEMORY_DMABUF">
		
<h3 class="constant" id="gst_caps_feature_memory_dmabuf">
	GST_CAPS_FEATURE_MEMORY_DMABUF
</h3>

		<pre class="raw_code">
#define GST_CAPS_FEATURE_MEMORY_DMABUF "memory:DMABuf"
</pre>

<p>Constant that defines the caps feature name for DMA buffer sharing.</p>
<p>It has to be used for non-mappable dma-buf only, i.e. when the underlying
memory is not mappable to user space. Or when the mapped memory contains
non meaningful data. It can be the case for protected content or when the
user wants explicitly avoid any software post processing.</p>
<p>In these cases all elements between the exported and the importer has to work
in passthrough mode. This is done by adding this caps feature.</p>
<p>When the memory is mappable for read and write requests then it is assumes
to be a fast path and so this caps feature should not be used. Though
according to the dma-buf protocal, while it is mapped it prevents the
exporter to migrate the buffer.</p>
<p>This caps feature should not serve at all the purpose of selecting the
<em>GST_ALLOCATOR_DMABUF</em> allocator during caps negotiation.
When the exporter is the upstream element from the importer point of view,
the exporter should try to map the dma buffer at runtime (preferrably during
decide_allocation phase). When it succeeds for <a href="libgstreamer-1.0/c/gstmemory.html#GST_MAP_READWRITE">GST_MAP_READWRITE</a> this caps
feature should not be used. This allows scalers, color converts and any image
processing filters to work directly on the dma buffer.
In this case the importer element should check all incomming memory using
<a href="gst-plugins-base-allocators-1.0/c/gstdmabuf.html#gst_is_dmabuf_memory">gst_is_dmabuf_memory</a>.</p>


</div>

            

<div class="base_symbol_container" data-hotdoc-tags="" id="GST_ALLOCATOR_DMABUF">
		
<h3 class="constant" id="gst_allocator_dmabuf">
	GST_ALLOCATOR_DMABUF
</h3>

		<pre class="raw_code">
#define GST_ALLOCATOR_DMABUF "dmabuf"
</pre>



</div>






		
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<hr>
	<div id="footer">
		    

	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>

</body>

<script src="assets/js/navbar_offset_scroller.js"></script>
</html>
