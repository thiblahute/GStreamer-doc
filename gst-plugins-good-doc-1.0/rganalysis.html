<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>rganalysis</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/prism.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/utils.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>
<script src="assets/js/navigation.js"></script>


<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/trie.js"></script>


<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body data-spy="scroll" data-target=".scrollspy" data-offset="70">


<nav class="navbar navbar-fixed-top navbar-default">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a href="https://gstreamer.freedesktop.org/" class="hotdoc-navbar-brand">
				<img src="assets/images/gstreamer-logo.svg" alt="Home" id="home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
							</ul>
		</div>
	</div>
</nav>

<main class="page-row page-row-expanded">
<div data-extension="gst-extension" data-hotdoc-project="gst-plugins-good-doc-1.0" data-hotdoc-ref="rganalysis.html" class="page_container" id="page-wrapper" data-hotdoc-meta-gi-languages="c,python,javascript" data-hotdoc-meta-gi-language="javascript">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2" id="sidenav-column">
	<div class="panel panel-collapse" id="sidenav" data-hotdoc-role="navigation">
		<div id="sidenav-search" role="search">
			<input type="text" class="form-control" placeholder="Fetching index" id="sidenav-lookup-field" disabled>
		</div>
		<div id="sitenav-wrapper" class="mCustomScrollbar" data-mcs-theme="minimal">
			<div class="sidenav-main-panel-body">
				<div id="site-navigation">
				</div>
			</div>
			<!-- FIXME -->
			<div style="height: 76px;"></div>
		</div>
	</div>
</div>

<div class="col-sm-12 col-md-9 col-xl-8">
	<div id="main">
				
<div id="page-description" data-hotdoc-source="rganalysis">
<h1 id="rganalysis1">rganalysis</h1><p>This element analyzes raw audio sample data in accordance with the proposed
<ulink url="http://replaygain.org">ReplayGain standard</ulink> for
calculating the ideal replay gain for music tracks and albums.  The element
is designed as a pass-through filter that never modifies any data.  As it
receives an EOS event, it finalizes the ongoing analysis and generates a tag
list containing the results.  It is sent downstream with a tag event and
posted on the message bus with a tag message.  The EOS event is forwarded as
normal afterwards.  Result tag lists at least contain the tags
<a href="../libgstreamer-doc-1.0/c/gsttaglist.html#GST_TAG_TRACK_GAIN">GST_TAG_TRACK_GAIN</a>, <a href="../libgstreamer-doc-1.0/c/gsttaglist.html#GST_TAG_TRACK_PEAK">GST_TAG_TRACK_PEAK</a> and <a href="../libgstreamer-doc-1.0/c/gsttaglist.html#GST_TAG_REFERENCE_LEVEL">GST_TAG_REFERENCE_LEVEL</a>.</p>
<p>Because the generated metadata tags become available at the end of streams,
downstream muxer and encoder elements are normally unable to save them in
their output since they generally save metadata in the file header.
Therefore, it is often necessary that applications read the results in a bus
event handler for the tag message.  Obtaining the values this way is always
needed for album processing (see <a href="rganalysis.html#GstRgAnalysis:num-tracks">num-tracks</a> property) since
the album gain and peak values need to be associated with all tracks of an
album, not just the last one.</p>
<h2 id="example-launch-lines">Example launch lines</h2>
<pre><code>gst-launch-1.0 -t audiotestsrc wave=sine num-buffers=512 ! rganalysis ! fakesink
</code></pre>
<p>Analyze a simple test waveform</p>
<pre><code>gst-launch-1.0 -t filesrc location=filename.ext ! decodebin \
    ! audioconvert ! audioresample ! rganalysis ! fakesink
</code></pre>
<p>Analyze a given file</p>
<pre><code>gst-launch-1.0 -t gnomevfssrc location=http://replaygain.hydrogenaudio.org/ref_pink.wav \
    ! wavparse ! rganalysis ! fakesink
</code></pre>
<p>Analyze the pink noise reference file</p>
<p>The above launch line yields a result gain of +6 dB (instead of the expected
+0 dB).  This is not in error, refer to the <a href="rganalysis.html#GstRgAnalysis:reference-level">reference-level</a>
property documentation for more information.</p>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>This element is based on code used in the <ulink url="http://sjeng.org/vorbisgain.html">vorbisgain</ulink> program and many
others.  The relevant parts are copyrighted by David Robinson, Glen Sawyer
and Frank Klemm.</p>

</div>


<h2 class="symbol_section" id="Classes">Classes</h2>


<div class="base_symbol_container" data-hotdoc-tags="" id="rganalysis">
		<h3 id="rganalysis2">
	rganalysis
</h3>

		<div class="hierarchy_container">
	<div class="hierarchy_details">
<pre>
<a title="GObject" href="https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#GObject-struct">GObject</a>
    <span class="lineart">╰──</span><a title="GInitiallyUnowned" href="https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#GInitiallyUnowned">GInitiallyUnowned</a>
        <span class="lineart">╰──</span><a title="GstObject" href="../libgstreamer-doc-1.0/c/gstobject.html#GstObject">GstObject</a>
            <span class="lineart">╰──</span><a title="GstElement" href="../libgstreamer-doc-1.0/c/gstelement.html#GstElement">GstElement</a>
                <span class="lineart">╰──</span><a title="GstBaseTransform" href="../libgstbase-doc-1.0/c/gstbasetransform.html#GstBaseTransform">GstBaseTransform</a>
                    <span class="lineart">╰──</span>rganalysis
</pre>

</div>

</div>

<div class="class_details">
	<p>This element analyzes raw audio sample data in accordance with the proposed
<ulink url="http://replaygain.org">ReplayGain standard</ulink> for
calculating the ideal replay gain for music tracks and albums.  The element
is designed as a pass-through filter that never modifies any data.  As it
receives an EOS event, it finalizes the ongoing analysis and generates a tag
list containing the results.  It is sent downstream with a tag event and
posted on the message bus with a tag message.  The EOS event is forwarded as
normal afterwards.  Result tag lists at least contain the tags
<a href="../libgstreamer-doc-1.0/c/gsttaglist.html#GST_TAG_TRACK_GAIN">GST_TAG_TRACK_GAIN</a>, <a href="../libgstreamer-doc-1.0/c/gsttaglist.html#GST_TAG_TRACK_PEAK">GST_TAG_TRACK_PEAK</a> and <a href="../libgstreamer-doc-1.0/c/gsttaglist.html#GST_TAG_REFERENCE_LEVEL">GST_TAG_REFERENCE_LEVEL</a>.</p>
<p>Because the generated metadata tags become available at the end of streams,
downstream muxer and encoder elements are normally unable to save them in
their output since they generally save metadata in the file header.
Therefore, it is often necessary that applications read the results in a bus
event handler for the tag message.  Obtaining the values this way is always
needed for album processing (see <a href="rganalysis.html#GstRgAnalysis:num-tracks">num-tracks</a> property) since
the album gain and peak values need to be associated with all tracks of an
album, not just the last one.</p>
<h2 id="example-launch-lines1">Example launch lines</h2>
<pre><code>gst-launch-1.0 -t audiotestsrc wave=sine num-buffers=512 ! rganalysis ! fakesink
</code></pre>
<p>Analyze a simple test waveform</p>
<pre><code>gst-launch-1.0 -t filesrc location=filename.ext ! decodebin \
    ! audioconvert ! audioresample ! rganalysis ! fakesink
</code></pre>
<p>Analyze a given file</p>
<pre><code>gst-launch-1.0 -t gnomevfssrc location=http://replaygain.hydrogenaudio.org/ref_pink.wav \
    ! wavparse ! rganalysis ! fakesink
</code></pre>
<p>Analyze the pink noise reference file</p>
<p>The above launch line yields a result gain of +6 dB (instead of the expected
+0 dB).  This is not in error, refer to the <a href="rganalysis.html#GstRgAnalysis:reference-level">reference-level</a>
property documentation for more information.</p>
<h2 id="acknowledgements1">Acknowledgements</h2>
<p>This element is based on code used in the <ulink url="http://sjeng.org/vorbisgain.html">vorbisgain</ulink> program and many
others.  The relevant parts are copyrighted by David Robinson, Glen Sawyer
and Frank Klemm.</p>

</div>

</div>


<h2 class="symbol_section" id="Pad_Templates">Pad Templates</h2>


<div class="base_symbol_container" data-hotdoc-tags="" id="GstRgAnalysis-&gt;src">
		<h3 id="src">
    src:
</h3>
<table>
    <tbody>
        <tr><td><b>Presence:</b></td><td>always</td></tr>
        <tr><td><b>Direction:</b></td><td>src</td></tr>
        <tr><td><b>Capabilities:</b></td><td>audio/x-raw, format=(string){ F32LE, S16LE }, layout=(string)interleaved, channels=(int)1, rate=(int){ 8000, 11025, 12000, 16000, 22050, 24000, 32000, 44100, 48000 }; audio/x-raw, format=(string){ F32LE, S16LE }, layout=(string)interleaved, channels=(int)2, channel-mask=(bitmask)0x0000000000000003, rate=(int){ 8000, 11025, 12000, 16000, 22050, 24000, 32000, 44100, 48000 }</td></tr>
    </tbody>
</table>

			
</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRgAnalysis-&gt;sink">
		<h3 id="sink">
    sink:
</h3>
<table>
    <tbody>
        <tr><td><b>Presence:</b></td><td>always</td></tr>
        <tr><td><b>Direction:</b></td><td>sink</td></tr>
        <tr><td><b>Capabilities:</b></td><td>audio/x-raw, format=(string){ F32LE, S16LE }, layout=(string)interleaved, channels=(int)1, rate=(int){ 8000, 11025, 12000, 16000, 22050, 24000, 32000, 44100, 48000 }; audio/x-raw, format=(string){ F32LE, S16LE }, layout=(string)interleaved, channels=(int)2, channel-mask=(bitmask)0x0000000000000003, rate=(int){ 8000, 11025, 12000, 16000, 22050, 24000, 32000, 44100, 48000 }</td></tr>
    </tbody>
</table>

			
</div>


<h2 class="symbol_section" id="Properties">Properties</h2>


<div class="base_symbol_container" data-hotdoc-tags="" id="GstRgAnalysis:name">
		<h3 class="method" id="name">
	<span><code>name</code></span>
</h3>

		<pre class="property_signature">
“name” <span class="type"><a title="gchar" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar">gchar</a> *</span>
</pre>



<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
				/		
				Construct
			
</p>
<p>
	Default value :	rganalysis0
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRgAnalysis:parent">
		<h3 class="method" id="parent">
	<span><code>parent</code></span>
</h3>

		<pre class="property_signature">
“parent” <span class="type"><a title="GstObject" href="../libgstreamer-doc-1.0/c/gstobject.html#GstObject">GstObject</a> *</span>
</pre>



<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRgAnalysis:qos">
		<h3 class="method" id="qos">
	<span><code>qos</code></span>
</h3>

		<pre class="property_signature">
“qos” <span class="type"><a title="gboolean" href="https://developer.gnome.org/camel/unstable/CamelIMAPXServer.html#gboolean">gboolean</a></span>
</pre>



<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
</p>
<p>
	Default value :	false
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRgAnalysis:num-tracks">
		<h3 class="method" id="numtracks">
	<span><code>num-tracks</code></span>
</h3>

		<pre class="property_signature">
“num-tracks” <span class="type"><a title="gint" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gint">gint</a></span>
</pre>

<p>Number of remaining album tracks.</p>
<p>Analyzing several streams sequentially and assigning them a common result
gain is known as "album processing".  If this gain is used during playback
(by switching to "album mode"), all tracks of an album receive the same
amplification.  This keeps the relative volume levels between the tracks
intact.  To enable this, set this property to the number of streams that
will be processed as album tracks.</p>
<p>Every time an EOS event is received, the value of this property is
decremented by one.  As it reaches zero, it is assumed that the last track
of the album finished.  The tag list for the final stream will contain the
additional tags <a href="../libgstreamer-doc-1.0/c/gsttaglist.html#GST_TAG_ALBUM_GAIN">GST_TAG_ALBUM_GAIN</a> and <a href="../libgstreamer-doc-1.0/c/gsttaglist.html#GST_TAG_ALBUM_PEAK">GST_TAG_ALBUM_PEAK</a>.  All other
streams just get the two track tags posted because the values for the album
tags are not known before all tracks are analyzed.  Applications need to
ensure that the album gain and peak values are also associated with the
other tracks when storing the results.</p>
<p>If the total number of album tracks is unknown beforehand, just ensure that
the value is greater than 1 before each track starts.  Then before the end
of the last track, set it to the value 1.</p>
<p>To perform album processing, the element has to preserve data between
streams.  This cannot survive a state change to the NULL or READY state.
If you change your pipeline's state to NULL or READY between tracks, lock
the element's state using <a href="../libgstreamer-doc-1.0/c/gstelement.html#gst_element_set_locked_state">gst_element_set_locked_state</a> when it is in
PAUSED or PLAYING.</p>


<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
</p>
<p>
	Default value :	0
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRgAnalysis:forced">
		<h3 class="method" id="forced">
	<span><code>forced</code></span>
</h3>

		<pre class="property_signature">
“forced” <span class="type"><a title="gboolean" href="https://developer.gnome.org/camel/unstable/CamelIMAPXServer.html#gboolean">gboolean</a></span>
</pre>

<p>Whether to analyze streams even when ReplayGain tags exist.</p>
<p>For assisting transcoder/converter applications, the element can silently
skip the processing of streams that already contain the necessary tags.
Data will flow as usual but the element will not consume CPU time and will
not generate result tags.  To enable possible skipping, set this property
to <a href="https://developer.gnome.org/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS">FALSE</a>.</p>
<p>If used in conjunction with <link linkend="GstRgAnalysis--num-tracks">album
processing, the element will skip the number of remaining album
tracks if a full set of tags is found for the first track.  If a subsequent
track of the album is missing tags, processing cannot start again.  If this
is undesired, the application has to scan all files beforehand and enable
forcing of processing if needed.</p>


<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
</p>
<p>
	Default value :	true
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRgAnalysis:reference-level">
		<h3 class="method" id="referencelevel">
	<span><code>reference-level</code></span>
</h3>

		<pre class="property_signature">
“reference-level” <span class="type"><a title="gdouble" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gdouble">gdouble</a></span>
</pre>

<p>Reference level [dB].</p>
<p>Analyzing the ReplayGain pink noise reference waveform computes a result of
+6 dB instead of the expected 0 dB.  This is because the default reference
level is 89 dB.  To obtain values as lined out in the original proposal of
ReplayGain, set this property to 83.</p>
<p>Almost all software uses 89 dB as a reference however, and this value has
become the new official value.  That is to say, while the change has been
acclaimed by the author of the ReplayGain proposal, the <ulink url="http://replaygain.org">webpage</ulink> is still outdated at the time
of this writing.</p>
<p>The value was changed because the original proposal recommends a default
pre-amp value of +6 dB for playback.  This seemed a bit odd, as it means
that the algorithm has the general tendency to produce adjustment values
that are 6 dB too low.  Bumping the reference level by 6 dB compensated for
this.</p>
<p>The problem of the reference level being ambiguous for lack of concise
standardization is to be solved by adopting the <a href="../libgstreamer-doc-1.0/c/gsttaglist.html#GST_TAG_REFERENCE_LEVEL">GST_TAG_REFERENCE_LEVEL</a>
tag, which allows to store the used value alongside the gain values.</p>


<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
</p>
<p>
	Default value :	89
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRgAnalysis:message">
		<h3 class="method" id="message">
	<span><code>message</code></span>
</h3>

		<pre class="property_signature">
“message” <span class="type"><a title="gboolean" href="https://developer.gnome.org/camel/unstable/CamelIMAPXServer.html#gboolean">gboolean</a></span>
</pre>



<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
				/		
				Construct
			
</p>
<p>
	Default value :	false
</p>

</div>


	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
</div>
<div class="hidden-xs col-xl-2">
</div>
	</div>
</div>
</main>

<footer class="page-row">
	<div class="container-fluid">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2"></div>
		<div class="col-sm-12 col-md-9 col-xl-8">
						
		</div>
		<div class="hidden-xs col-xl-2"></div>
	</div>
</div>
</footer>

</body>

<script src="assets/js/navbar_offset_scroller.js"></script>
</html>