<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>rtprtxreceive</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/prism.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/utils.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>
<script src="assets/js/navigation.js"></script>


<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/trie.js"></script>


<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body data-spy="scroll" data-target=".scrollspy" data-offset="70">


<nav class="navbar navbar-fixed-top navbar-default">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a href="https://gstreamer.freedesktop.org/" class="hotdoc-navbar-brand">
				<img src="assets/images/gstreamer-logo.svg" alt="Home" id="home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
							</ul>
		</div>
	</div>
</nav>

<main class="page-row page-row-expanded">
<div data-extension="gst-extension" data-hotdoc-in-toplevel="False" data-hotdoc-project="gst-plugins-good-doc-1.0" data-hotdoc-ref="element-rtprtxreceive.html" class="page_container" id="page-wrapper" data-hotdoc-meta-gi-languages="c,python,javascript" data-hotdoc-meta-gi-language="javascript">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2" id="sidenav-column">
	<div class="panel panel-collapse" id="sidenav" data-hotdoc-role="navigation">
		<div id="sidenav-search" role="search">
			<input type="text" class="form-control" placeholder="Fetching index" id="sidenav-lookup-field" disabled>
		</div>
		<div id="sitenav-wrapper" class="mCustomScrollbar" data-mcs-theme="minimal">
			<div class="sidenav-main-panel-body">
				<div id="site-navigation">
				</div>
			</div>
			<!-- FIXME -->
			<div style="height: 76px;"></div>
		</div>
	</div>
</div>

<div class="col-sm-12 col-md-9 col-xl-8">
	<div id="main">
				
<div id="page-description" data-hotdoc-source="element-rtprtxreceive">
<h1 id="rtprtxreceive1">rtprtxreceive</h1><p>The receiver will listen to the custom retransmission events from the
downstream jitterbuffer and will remember the SSRC1 of the stream and
seqnum that was requested. When it sees a packet with one of the stored
seqnum, it associates the SSRC2 of the stream with the SSRC1 of the
master stream. From then it knows that SSRC2 is the retransmission
stream of SSRC1. This algorithm is stated in RFC 4588. For this
algorithm to work, RFC4588 also states that no two pending retransmission
requests can exist for the same seqnum and different SSRCs or else it
would be impossible to associate the retransmission with the original
requester SSRC.
When the RTX receiver has associated the retransmission packets,
it can depayload and forward them to the source pad of the element.
RTX is SSRC-multiplexed. See <a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good/html/gst-plugins-good-plugins-rtprtxsend.html#GstRtpRtxSend-struct">GstRtpRtxSend</a></p>
<h2 id="example-pipelines">Example pipelines</h2>
<pre><code class="language-["> gst-launch-1.0 rtpsession name=rtpsession \
         audiotestsrc ! speexenc ! rtpspeexpay pt=97 ! rtprtxsend rtx-payload-type=99 ! \
             identity drop-probability=0.1 ! rtpsession.send_rtp_sink \
             rtpsession.send_rtp_src ! udpsink host="127.0.0.1" port=5000 \
         udpsrc port=5001 ! rtpsession.recv_rtcp_sink \
         rtpsession.send_rtcp_src ! udpsink host="127.0.0.1" port=5002 sync=false async=false
 ]| Send audio stream through port 5000. (5001 and 5002 are just the rtcp link with the receiver)
 |[
 gst-launch-1.0 rtpsession name=rtpsession \
         udpsrc port=5000 caps="application/x-rtp,media=(string)audio,clock-rate=(int)44100,encoding-name=(string)SPEEX,encoding-params=(string)1,octet-align=(string)1" ! \
             rtpsession.recv_rtp_sink \
             rtpsession.recv_rtp_src ! rtprtxreceive rtx-payload-types="99" ! rtpjitterbuffer do-retransmission=true ! rtpspeexdepay ! \
             speexdec ! audioconvert ! autoaudiosink \
         rtpsession.send_rtcp_src ! udpsink host="127.0.0.1" port=5001 \
         udpsrc port=5002 ! rtpsession.recv_rtcp_sink sync=fakse async=false
 ]| Receive audio stream from port 5000. (5001 and 5002 are just the rtcp link with the sender)
 On sender side make sure to use a different payload type for the stream and
 its associated retransmission stream (see #GstRtpRtxSend). Note that several retransmission streams can
 have the same payload type so this is not deterministic. Actually the
 rtprtxreceiver element does the association using seqnum values.
 On receiver side set all the retransmission payload types (Those informations are retrieve
 through SDP).
 You should still hear a clear sound when setting drop-probability to something greater than 0.
 The rtpjitterbuffer will generate a custom upstream event GstRTPRetransmissionRequest when
 it assumes that one packet is missing. Then this request is translated to a FB NACK in the rtcp link
 Finally the rtpsession of the sender side re-convert it in a GstRTPRetransmissionRequest that will
 be handle by rtprtxsend.
 When increasing this value it may be possible that even the retransmission stream would be dropped
 so the receiver will ask to resend the packets again and again until it actually receive them.
 If the value is too high the rtprtxsend will not be able to retrieve the packet in its list of
 stored packets. For learning purpose you could try to increase the max-size-packets or max-size-time
 rtprtxsender's properties.
 Also note that you should use rtprtxsend through rtpbin and its set-aux-send property. See #GstRtpBin.
 |[
 gst-launch-1.0 rtpsession name=rtpsession0 \
         audiotestsrc wave=0 ! speexenc ! rtpspeexpay pt=97 ! rtprtxsend rtx-payload-type=99 seqnum-offset=1 ! \
             identity drop-probability=0.1 ! rtpsession0.send_rtp_sink \
             rtpsession0.send_rtp_src ! udpsink host="127.0.0.1" port=5000 \
         udpsrc port=5001 ! rtpsession0.recv_rtcp_sink \
         rtpsession0.send_rtcp_src ! udpsink host="127.0.0.1" port=5002 sync=false async=false \
                rtpsession name=rtpsession1 \
         audiotestsrc wave=0 ! speexenc ! rtpspeexpay pt=97 ! rtprtxsend rtx-payload-type=99 seqnum-offset=10 ! \
             identity drop-probability=0.1 ! rtpsession1.send_rtp_sink \
             rtpsession1.send_rtp_src ! udpsink host="127.0.0.1" port=5000 \
         udpsrc port=5004 ! rtpsession1.recv_rtcp_sink \
         rtpsession1.send_rtcp_src ! udpsink host="127.0.0.1" port=5002 sync=false async=false
 ]| Send two audio streams to port 5000.
 |[
 gst-launch-1.0 rtpsession name=rtpsession
         udpsrc port=5000 caps="application/x-rtp,media=(string)audio,clock-rate=(int)44100,encoding-name=(string)SPEEX,encoding-params=(string)1,octet-align=(string)1" ! \
             rtpsession.recv_rtp_sink \
             rtpsession.recv_rtp_src ! rtprtxreceive rtx-payload-types="99" ! rtpssrcdemux name=demux \
             demux. ! queue ! rtpjitterbuffer do-retransmission=true ! rtpspeexdepay ! speexdec ! audioconvert ! autoaudiosink \
             demux. ! queue ! rtpjitterbuffer do-retransmission=true ! rtpspeexdepay ! speexdec ! audioconvert ! autoaudiosink \
         rtpsession.send_rtcp_src ! ! tee name=t ! queue ! udpsink host="127.0.0.1" port=5001 t. ! queue ! udpsink host="127.0.0.1" port=5004 \
         udpsrc port=5002 ! rtpsession.recv_rtcp_sink sync=fakse async=false
 ]| Receive audio stream from port 5000.
 On sender side the two streams have the same payload type for master streams, Same about retransmission streams.
 The streams are sent to the network through two distincts sessions.
 But we need to set a different seqnum-offset to make sure their seqnum navigate at a different rate like in concrete cases.
 We could also choose the same seqnum offset but we would require to set a different initial seqnum value.
 This is also why the rtprtxreceive can succeed to do the association between master and retransmission stream.
 On receiver side the same session is used to receive the two streams. So the rtpssrcdemux is here to demultiplex
 those two streams. The rtprtxreceive is responsible for reconstructing the original packets from the two retransmission streams.
 You can play with the drop-probability value for one or both streams.
 You should hear a clear sound. (after a few seconds the two streams wave feel synchronized)
</code></pre>

</div>


<h2 class="symbol_section" id="Classes">Classes</h2>


<div class="base_symbol_container" data-hotdoc-tags="" id="rtprtxreceive">
		<h3 id="rtprtxreceive2">
	rtprtxreceive
</h3>

		<div class="hierarchy_container">
	<div class="hierarchy_details">
<pre>
<a title="GObject" href="https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#GObject-struct">GObject</a>
    <span class="lineart">╰──</span><a title="GInitiallyUnowned" href="https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#GInitiallyUnowned">GInitiallyUnowned</a>
        <span class="lineart">╰──</span><a title="GstObject" href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstObject.html#GstObject-struct">GstObject</a>
            <span class="lineart">╰──</span><a title="GstElement" href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstElement.html#GstElement-struct">GstElement</a>
                <span class="lineart">╰──</span>rtprtxreceive
</pre>

</div>

</div>




</div>


<h2 class="symbol_section" id="Pad_Templates">Pad Templates</h2>


<div class="base_symbol_container" data-hotdoc-tags="" id="GstRtpRtxReceive-&gt;src">
		<h3 id="src">
    src:
</h3>
<table>
    <tbody>
        <tr><td><b>Presence:</b></td><td>always</td></tr>
        <tr><td><b>Direction:</b></td><td>src</td></tr>
        <tr><td><b>Capabilities:</b></td><td>application/x-rtp</td></tr>
    </tbody>
</table>

			
</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRtpRtxReceive-&gt;sink">
		<h3 id="sink">
    sink:
</h3>
<table>
    <tbody>
        <tr><td><b>Presence:</b></td><td>always</td></tr>
        <tr><td><b>Direction:</b></td><td>sink</td></tr>
        <tr><td><b>Capabilities:</b></td><td>application/x-rtp</td></tr>
    </tbody>
</table>

			
</div>


<h2 class="symbol_section" id="Properties">Properties</h2>


<div class="base_symbol_container" data-hotdoc-tags="" id="GstRtpRtxReceive:name">
		<h3 class="method" id="name">
	<span><code>name</code></span>
</h3>

		<pre class="property_signature">
“name” <span class="type"><a title="gchar" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar">gchar</a> *</span>
</pre>



<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
				/		
				Construct
			
</p>
<p>
	Default value :	rtprtxreceive0
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRtpRtxReceive:parent">
		<h3 class="method" id="parent">
	<span><code>parent</code></span>
</h3>

		<pre class="property_signature">
“parent” <span class="type"><a title="GstObject" href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstObject.html#GstObject-struct">GstObject</a> *</span>
</pre>



<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRtpRtxReceive:payload-type-map">
		<h3 class="method" id="payloadtypemap">
	<span><code>payload-type-map</code></span>
</h3>

		<pre class="property_signature">
“payload-type-map” <span class="type"><a title="GstStructure" href="../libgstreamer-doc-1.0/c/gststructure.html#GstStructure">GstStructure</a> *</span>
</pre>



<p>
	Flags :	
	
		
				Read
			
				/		
				Write
			
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRtpRtxReceive:num-rtx-requests">
		<h3 class="method" id="numrtxrequests">
	<span><code>num-rtx-requests</code></span>
</h3>

		<pre class="property_signature">
“num-rtx-requests” <span class="type"><a title="guint" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#guint">guint</a></span>
</pre>



<p>
	Flags :	
	
		
				Read
			
</p>
<p>
	Default value :	0
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRtpRtxReceive:num-rtx-packets">
		<h3 class="method" id="numrtxpackets">
	<span><code>num-rtx-packets</code></span>
</h3>

		<pre class="property_signature">
“num-rtx-packets” <span class="type"><a title="guint" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#guint">guint</a></span>
</pre>



<p>
	Flags :	
	
		
				Read
			
</p>
<p>
	Default value :	0
</p>

</div>



<div class="base_symbol_container" data-hotdoc-tags="" id="GstRtpRtxReceive:num-rtx-assoc-packets">
		<h3 class="method" id="numrtxassocpackets">
	<span><code>num-rtx-assoc-packets</code></span>
</h3>

		<pre class="property_signature">
“num-rtx-assoc-packets” <span class="type"><a title="guint" href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#guint">guint</a></span>
</pre>



<p>
	Flags :	
	
		
				Read
			
</p>
<p>
	Default value :	0
</p>

</div>


	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
</div>
<div class="hidden-xs col-xl-2">
</div>
	</div>
</div>
</main>

<footer class="page-row">
	<div class="container-fluid">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2"></div>
		<div class="col-sm-12 col-md-9 col-xl-8">
						
		</div>
		<div class="hidden-xs col-xl-2"></div>
	</div>
</div>
</footer>

</body>

<script src="assets/js/navbar_offset_scroller.js"></script>
</html>