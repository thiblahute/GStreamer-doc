fragment_downloaded_cb({"url": "tutorials/basic/media-information-gathering.html#walkthrough", "fragment": "Walkthrough \nThese are the main steps to use the GstDiscoverer \ngst_discoverer_new creates a new Discoverer object. The first parameter is the timeout per file in nanoseconds use the GST_SECOND macro for simplicity \nConnect to the interesting signals as usual. We discuss them in the snippet for their callbacks. \ngst_discoverer_start launches the discovering process but we have not provided any URI to discover yet. This is done next \ngst_discoverer_discover_uri_async enqueues the provided URI for discovery. Multiple URIs can be enqueued with this function. As the discovery process for each of them finishes the registered callback functions will be fired up. \nThe usual GLib main loop is instantiated and executed. We will get out of it when g_main_loop_quit is called from the on_finished_cb callback. \nOnce we are done with the discoverer we stop it with gst_discoverer_stop and unref it with g_object_unref \nLet s review now the callbacks we have registered \nWe got here because the Discoverer has finished working on one URI and provides us a GstDiscovererInfo structure with all the information. \nThe first step is to retrieve the particular URI this call refers to in case we had multiple discover process running which is not the case in this example with gst_discoverer_info_get_uri and the discovery result with gst_discoverer_info_get_result \nAs the code shows any result other than GST_DISCOVERER_OK means that there has been some kind of problem and this URI cannot be played. The reasons can vary but the enum values are quite explicit GST_DISCOVERER_BUSY can only happen when in synchronous mode which is not used in this example \nIf no error happened information can be retrieved from the GstDiscovererInfo structure with the different gst_discoverer_info_get_ methods like gst_discoverer_info_get_duration for example \nBits of information which are made of lists like tags and stream info needs some extra parsing \nTags are metadata labels attached to the media. They can be examined with gst_tag_list_foreach which will call print_tag_foreach for each tag found the list could also be traversed manually for example or a specific tag could be searched for with gst_tag_list_get_string The code for print_tag_foreach is pretty much self explicative. \ngst_discoverer_info_get_stream_info returns a GstDiscovererStreamInfo structure that is parsed in the print_topology function and then discarded with gst_discoverer_stream_info_unref \nThe print_stream_info function s code is also pretty much self explicative it prints the stream s capabilities and then the associated caps using print_tag_foreach too. \nThen print_topology looks for the next element to display. If gst_discoverer_stream_info_get_next returns a non NULL stream info it refers to our descendant and that should be displayed. Otherwise if we are a container recursively call print_topology on each of our children obatined with gst_discoverer_container_info_get_streams Otherwise we are a final stream and do not need to recurse This part of the Discoverer API is admittedly a bit obscure \n"});