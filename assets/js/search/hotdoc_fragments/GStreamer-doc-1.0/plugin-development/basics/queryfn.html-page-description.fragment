fragment_downloaded_cb({"url": "GStreamer-doc-1.0/plugin-development/basics/queryfn.html#page-description", "fragment": "<div id=\"page-description\" data-hotdoc-source=\"queryfn.md\">\n<h1 id=\"the-query-function\">The query function</h1>\n<p>Through the query function, your element will receive queries that it\nhas to reply to. These are queries like position, duration but also\nabout the supported formats and scheduling modes your element supports.\nQueries can travel both upstream and downstream, so you can receive them\non sink pads as well as source pads.</p>\n<p>Below follows a very simple query function that we install on the source\npad of our element.</p>\n<pre><code class=\"language-c\">\nstatic gboolean gst_my_filter_src_query (GstPad    *pad,\n                                         GstObject *parent,\n                                         GstQuery  *query);\n\n[..]\n\nstatic void\ngst_my_filter_init (GstMyFilter * filter)\n{\n[..]\n  /* configure event function on the pad before adding\n   * the pad to the element */\n  gst_pad_set_query_function (filter-&gt;srcpad,\n      gst_my_filter_src_query);\n[..]\n}\n\nstatic gboolean\ngst_my_filter_src_query (GstPad    *pad,\n                 GstObject *parent,\n                 GstQuery  *query)\n{\n  gboolean ret;\n  GstMyFilter *filter = GST_MY_FILTER (parent);\n\n  switch (GST_QUERY_TYPE (query)) {\n    case GST_QUERY_POSITION:\n      /* we should report the current position */\n      [...]\n      break;\n    case GST_QUERY_DURATION:\n      /* we should report the duration here */\n      [...]\n      break;\n    case GST_QUERY_CAPS:\n      /* we should report the supported caps here */\n      [...]\n      break;\n    default:\n      /* just call the default handler */\n      ret = gst_pad_query_default (pad, parent, query);\n      break;\n  }\n  return ret;\n}\n\n\n</code></pre>\n<p>It is a good idea to call the default query handler\n<code>gst_pad_query_default ()</code> for unknown queries. Depending on the query\ntype, the default handler will forward the query or simply unref it.</p>\n\n</div>\n\n\n\t"});