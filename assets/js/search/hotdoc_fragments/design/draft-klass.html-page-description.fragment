fragment_downloaded_cb({"url": "design/draft-klass.html#page-description", "fragment": "<div id=\"page-description\" data-hotdoc-source=\"draft-klass.md\">\n<h1 id=\"element-klass-definition\">Element Klass definition</h1>\n<h2 id=\"purpose\">Purpose</h2>\n<p>Applications should be able to retrieve elements from the registry of\nexisting elements based on specific capabilities or features of the\nelement.</p>\n<p>A playback application might want to retrieve all the elements that can\nbe used for visualisation, for example, or a video editor might want to\nselect all video effect filters.</p>\n<p>The topic of defining the klass of elements should be based on use\ncases.</p>\n<p>A list of classes that are used in a installation can be generated\nusing: gst-inspect-1.0 -a | grep -ho Class:.* | cut -c8- | sed\n\"s/\\//\\\\n/g\" | sort | uniq</p>\n<h2 id=\"proposal\">Proposal</h2>\n<p>The GstElementDetails contains a field named klass that is a pointer to\na string describing the element type.</p>\n<p>In this document we describe the format and contents of the string.\nElements should adhere to this specification although that is not\nenforced to allow for wild (application specific) customisation.</p>\n<p>###string format</p>\n<pre><code>&lt;keyword&gt;['/'&lt;keyword]*\n\nThe string consists of an _unordered_ list of keywords separated with a '/'\ncharacter. While the / suggests a hierarchy, this is _not_ the case.\n</code></pre>\n<h3 id=\"keyword-categories\">keyword categories</h3>\n<ul>\n<li>\n<p>functional</p>\n<p>Categories are base on <em>intended usage</em> of the element. Some elements\nmight have other side-effects (especially for filers/effects). The purpose\nis to list enough keywords so that applications can do meaningful filtering,\nnot to completely describe the functionality, that is expressed in caps etc..</p>\n<ul>\n<li>\n<p>Source : produces data</p>\n</li>\n<li>\n<p>Sink : consumes data</p>\n</li>\n<li>\n<p>Filter : filters/transforms data, no modification on the data is\nintended (although it might be unavoidable). The filter can\ndecide on input and output caps independently of the stream\ncontents (GstBaseTransform).</p>\n</li>\n<li>\n<p>Effect : applies an effect to some data, changes to data are\nintended. Examples are colorbalance, volume. These elements can\nalso be implemented with GstBaseTransform.</p>\n</li>\n<li>\n<p>Demuxer : splits audio, video, \u2026 from a stream</p>\n</li>\n<li>\n<p>Muxer : interleave audio, video, \u2026 into one stream, this is like\nmixing but without losing or degrading each separate input\nstream. The reverse operation is possible with a Demuxer that\nreproduces the exact same input streams.</p>\n</li>\n<li>\n<p>Decoder : decodes encoded data into a raw format, there is\ntypically no relation between input caps and output caps. The\noutput caps are defined in the stream data. This separates the\nDecoder from the Filter and Effect.</p>\n</li>\n<li>\n<p>Encoder : encodes raw data into an encoded format.</p>\n</li>\n<li>\n<p>Mixer : combine audio, video, .. this is like muxing but with\napplying some algorithm so that the individual streams are not\nextractable anymore, there is therefore no reverse operation to\nmixing. (audio mixer, video mixer, \u2026)</p>\n</li>\n<li>\n<p>Converter : convert audio into video, text to audio, \u2026 The\nconverter typically works on raw types only. The source media\ntype is listed first.</p>\n</li>\n<li>\n<p>Analyzer : reports about the stream contents.</p>\n</li>\n<li>\n<p>Control : controls some aspect of a hardware device</p>\n</li>\n<li>\n<p>Extracter : extracts tags/headers from a stream</p>\n</li>\n<li>\n<p>Formatter : adds tags/headers to a stream</p>\n</li>\n<li>\n<p>Connector : allows for new connections in the pipeline. (tee, \u2026)</p>\n</li>\n<li>\n<p>\u2026</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Based on media type</p>\n<p>Purpose is to make a selection for elements operating on the different\ntypes of media. An audio application must be able to filter out the\nelements operating on audio, for example.</p>\n<ul>\n<li>\n<p>Audio : operates on audio data</p>\n</li>\n<li>\n<p>Video : operates on video data</p>\n</li>\n<li>\n<p>Image : operates on image data. Usually this media type can also\nbe used to make a video stream in which case it is added\ntogether with the Video media type.</p>\n</li>\n<li>\n<p>Text : operates on text data</p>\n</li>\n<li>\n<p>Metadata : operates on metadata</p>\n</li>\n<li>\n<p>\u2026</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Extra features</p>\n<p>The purpose is to further specialize the element, mostly for\napplication specific needs.</p>\n<ul>\n<li>\n<p>Network : element is used in networked situations</p>\n</li>\n<li>\n<p>Protocol : implements some protocol (RTSP, HTTP, \u2026)</p>\n</li>\n<li>\n<p>Payloader : encapsulate as payload (RTP, RDT,.. )</p>\n</li>\n<li>\n<p>Depayloader : strip a payload (RTP, RDT,.. )</p>\n</li>\n<li>\n<p>RTP : intended to be used in RTP applications</p>\n</li>\n<li>\n<p>Device : operates on some hardware device (disk, network, audio\ncard, video card, usb, \u2026)</p>\n</li>\n<li>\n<p>Visualisation : intended to be used for audio visualisation</p>\n</li>\n<li>\n<p>Debug : intended usage is more for debugging purposes.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Categories found, but not yet in one of the above lists</p>\n<ul>\n<li>\n<p>Bin : playbin, decodebin, bin, pipeline</p>\n</li>\n<li>\n<p>Codec : lots of decoders, encoder, demuxers should be removed?</p>\n</li>\n<li>\n<p>Generic : should be removed?</p>\n</li>\n<li>\n<p>File : like network, should go to Extra?</p>\n</li>\n<li>\n<p>Editor : gnonlin, textoverlays</p>\n</li>\n<li>\n<p>DVD, GDP, LADSPA, Parser, Player, Subtitle, Testing, \u2026</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>3) suggested order:</p>\n<pre><code>&lt;functional&gt;[/&lt;media type&gt;]*[/&lt;extra...&gt;]*\n</code></pre>\n<p>4) examples:</p>\n<pre><code>apedemux         : Extracter/Metadata\naudiotestsrc     : Source/Audio\nautoaudiosink    : Sink/Audio/Device\ncairotimeoverlay : Mixer/Video/Text\ndvdec            : Decoder/Video\ndvdemux          : Demuxer\ngoom             : Converter/Audio/Video\nid3demux         : Extracter/Metadata\nudpsrc           : Source/Network/Protocol/Device\nvideomixer       : Mixer/Video\nvideoconvert     : Filter/Video             (intended use to convert video with as little\n                                             visible change as possible)\nvertigotv        : Effect/Video             (intended use is to change the video)\nvolume           : Effect/Audio             (intended use is to change the audio data)\nvorbisdec        : Decoder/Audio\nvorbisenc        : Encoder/Audio\noggmux           : Muxer\nadder            : Mixer/Audio\nvideobox         : Effect/Video\nalsamixer        : Control/Audio/Device\naudioconvert     : Filter/Audio\naudioresample    : Filter/Audio\nxvimagesink      : Sink/Video/Device\nnavseek          : Filter/Debug\ndecodebin        : Decoder/Demuxer\nlevel            : Filter/Analyzer/Audio\ntee              : Connector/Debug\n</code></pre>\n<h3 id=\"open-issues\">open issues:</h3>\n<ul>\n<li>how to differentiate physical devices from logical ones?\nautoaudiosink : Sink/Audio/Device alsasink : Sink/Audio/Device</li>\n</ul>\n<h2 id=\"use-cases\">Use cases</h2>\n<ul>\n<li>\n<p>get a list of all elements implementing a video effect (pitivi):</p>\n<pre><code>  klass.contains (Effect &amp; Video)\n</code></pre>\n</li>\n<li>\n<p>get list of muxers (pitivi):</p>\n<pre><code>  klass.contains (Muxer)\n</code></pre>\n</li>\n<li>\n<p>get list of video encoders (pitivi):</p>\n<pre><code>  klass.contains (Encoder &amp; video)\n</code></pre>\n</li>\n<li>\n<p>Get a list of all audio/video visualisations (totem):</p>\n<pre><code>  klass.contains (Visualisation)\n</code></pre>\n</li>\n<li>\n<p>Get a list of all decoders/demuxer/metadata parsers/vis (playbin):</p>\n<pre><code>  klass.contains (Visualisation | Demuxer | Decoder | (Extractor &amp; Metadata))\n</code></pre>\n</li>\n<li>\n<p>Get a list of elements that can capture from an audio device\n(gst-properties):</p>\n<pre><code>  klass.contains (Source &amp; Audio &amp; Device)\n</code></pre>\n<ul>\n<li>filters out audiotestsrc, since it is not a device</li>\n</ul>\n</li>\n</ul>\n\n</div>\n\n\n\t"});