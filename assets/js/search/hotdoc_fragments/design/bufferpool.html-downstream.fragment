fragment_downloaded_cb({"url": "design/bufferpool.html#downstream", "fragment": "Downstream \nWhen the upstream element wants to negotiate a new format it might need to renegotiate a new bufferpool configuration with the downstream element. This can for example happen when the buffer size changes. \nWe can not just reconfigure the existing bufferpool because there might still be outstanding buffers from the pool in the pipeline. Therefore we need to create a new bufferpool for the new configuration while we let the old pool drain. \nImplementations can choose to reuse the same bufferpool object and wait for the drain to finish before reconfiguring the pool. \nThe element that wants to renegotiate a new bufferpool uses exactly the same algorithm as when it first started. It will negotiate caps first then use the ALLOCATION query to get and configure the new pool. \n"});