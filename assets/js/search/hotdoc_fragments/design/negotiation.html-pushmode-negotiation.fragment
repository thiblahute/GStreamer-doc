fragment_downloaded_cb({"url": "design/negotiation.html#pushmode-negotiation", "fragment": "Push mode negotiation \nPush mode negotiation happens when elements want to push buffers and need to decide on the format. This is called downstream negotiation because the upstream element decides the format for the downstream element. This is the most common case. \nNegotiation can also happen when a downstream element wants to receive another data format from an upstream element. This is called upstream negotiation. \nThe basics of negotiation are as follows \nGstCaps see caps are refcounted before they are pushed as an event to describe the contents of the following buffer. \nAn element should reconfigure itself to the new format received as a CAPS event before processing the following buffers. If the data type in the caps event is not acceptable the element should refuse the event. The element should also refuse the next buffers by returning an appropriate GST_FLOW_NOT_NEGOTIATED return value from the chain function. \nDownstream elements can request a format change of the stream by sending a RECONFIGURE event upstream. Upstream elements will renegotiate a new format when they receive a RECONFIGURE event. \nThe general flow for a source pad starting the negotiation. \nOne possible implementation in pseudo code \n"});