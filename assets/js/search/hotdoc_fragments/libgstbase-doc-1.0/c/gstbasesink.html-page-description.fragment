fragment_downloaded_cb({"url": "libgstbase-doc-1.0/c/gstbasesink.html#page-description", "fragment": "<div id=\"page-description\" data-hotdoc-source=\"gstbasesink.h\">\n<h1 id=\"gstbasesink\">GstBaseSink</h1><p><a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a> is the base class for sink elements in GStreamer, such as\nxvimagesink or filesink. It is a layer on top of <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstElement.html#GstElement-struct\">GstElement</a> that provides a\nsimplified interface to plugin writers. <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a> handles many details\nfor you, for example: preroll, clock synchronization, state changes,\nactivation in push or pull mode, and queries.</p>\n<p>In most cases, when writing sink elements, there is no need to implement\nclass methods from <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstElement.html#GstElement-struct\">GstElement</a> or to set functions on pads, because the\n<a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a> infrastructure should be sufficient.</p>\n<p><a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a> provides support for exactly one sink pad, which should be\nnamed \"sink\". A sink implementation (subclass of <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a>) should\ninstall a pad template in its class_init function, like so:</p>\n<pre><code class=\"language-[&lt;!--\"> static void\n my_element_class_init (GstMyElementClass *klass)\n {\n   GstElementClass *gstelement_class = GST_ELEMENT_CLASS (klass);\n\n   // sinktemplate should be a #GstStaticPadTemplate with direction\n   // %GST_PAD_SINK and name \"sink\"\n   gst_element_class_add_static_pad_template (gstelement_class, &amp;amp;sinktemplate);\n\n   gst_element_class_set_static_metadata (gstelement_class,\n       \"Sink name\",\n       \"Sink\",\n       \"My Sink element\",\n       \"The author &lt;my.sink@my.email&gt;\");\n }\n</code></pre>\n<p><a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a> will handle the prerolling correctly. This means that it will\nreturn <a href=\"../../libgstreamer-doc-1.0/c/gstelement.html#GST_STATE_CHANGE_ASYNC\">GST_STATE_CHANGE_ASYNC</a> from a state change to PAUSED until the first\nbuffer arrives in this element. The base class will call the\n<a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.preroll\">GstBaseSinkClass.preroll</a>() vmethod with this preroll buffer and will then\ncommit the state change to the next asynchronously pending state.</p>\n<p>When the element is set to PLAYING, <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a> will synchronise on the\nclock using the times returned from <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.get_times\">GstBaseSinkClass.get_times</a>(). If this\nfunction returns <a href=\"../../libgstreamer-doc-1.0/c/gstclock.html#GST_CLOCK_TIME_NONE\">GST_CLOCK_TIME_NONE</a> for the start time, no synchronisation\nwill be done. Synchronisation can be disabled entirely by setting the object\n<a href=\"../../Miscellaneous.html#GstBaseSink:sync\">GstBaseSink:sync</a> property to <a href=\"https://developer.gnome.org/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS\">FALSE</a>.</p>\n<p>After synchronisation the virtual method <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.render\">GstBaseSinkClass.render</a>() will be\ncalled. Subclasses should minimally implement this method.</p>\n<p>Subclasses that synchronise on the clock in the <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.render\">GstBaseSinkClass.render</a>()\nmethod are supported as well. These classes typically receive a buffer in\nthe render method and can then potentially block on the clock while\nrendering. A typical example is an audiosink.\nThese subclasses can use <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#gst_base_sink_wait_preroll\">gst_base_sink_wait_preroll</a> to perform the\nblocking wait.</p>\n<p>Upon receiving the EOS event in the PLAYING state, <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a> will wait\nfor the clock to reach the time indicated by the stop time of the last\n<a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.get_times\">GstBaseSinkClass.get_times</a>() call before posting an EOS message. When the\nelement receives EOS in PAUSED, preroll completes, the event is queued and an\nEOS message is posted when going to PLAYING.</p>\n<p><a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a> will internally use the <a href=\"../../libgstreamer-doc-1.0/c/gstevent.html#GST_EVENT_SEGMENT\">GST_EVENT_SEGMENT</a> events to schedule\nsynchronisation and clipping of buffers. Buffers that fall completely outside\nof the current segment are dropped. Buffers that fall partially in the\nsegment are rendered (and prerolled). Subclasses should do any subbuffer\nclipping themselves when needed.</p>\n<p><a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a> will by default report the current playback position in\n<a href=\"../../libgstreamer-doc-1.0/c/gstformat.html#GST_FORMAT_TIME\">GST_FORMAT_TIME</a> based on the current clock time and segment information.\nIf no clock has been set on the element, the query will be forwarded\nupstream.</p>\n<p>The <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.set_caps\">GstBaseSinkClass.set_caps</a>() function will be called when the subclass\nshould configure itself to process a specific media type.</p>\n<p>The <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.start\">GstBaseSinkClass.start</a>() and <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.stop\">GstBaseSinkClass.stop</a>() virtual methods\nwill be called when resources should be allocated. Any\n<a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.preroll\">GstBaseSinkClass.preroll</a>(), <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.render\">GstBaseSinkClass.render</a>() and\n<a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.set_caps\">GstBaseSinkClass.set_caps</a>() function will be called between the\n<a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.start\">GstBaseSinkClass.start</a>() and <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.stop\">GstBaseSinkClass.stop</a>() calls.</p>\n<p>The <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.event\">GstBaseSinkClass.event</a>() virtual method will be called when an event is\nreceived by <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseSink.html#GstBaseSink-struct\">GstBaseSink</a>. Normally this method should only be overridden by\nvery specific elements (such as file sinks) which need to handle the\nnewsegment event specially.</p>\n<p>The <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.unlock\">GstBaseSinkClass.unlock</a>() method is called when the elements should\nunblock any blocking operations they perform in the\n<a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.render\">GstBaseSinkClass.render</a>() method. This is mostly useful when the\n<a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.render\">GstBaseSinkClass.render</a>() method performs a blocking write on a file\ndescriptor, for example.</p>\n<p>The <a href=\"../../Miscellaneous.html#GstBaseSink:max-lateness\">GstBaseSink:max-lateness</a> property affects how the sink deals with\nbuffers that arrive too late in the sink. A buffer arrives too late in the\nsink when the presentation time (as a combination of the last segment, buffer\ntimestamp and element base_time) plus the duration is before the current\ntime of the clock.\nIf the frame is later than max-lateness, the sink will drop the buffer\nwithout calling the render method.\nThis feature is disabled if sync is disabled, the\n<a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#GstBaseSinkClass.get_times\">GstBaseSinkClass.get_times</a>() method does not return a valid start time or\nmax-lateness is set to -1 (the default).\nSubclasses can use <a href=\"../../libgstbase-doc-1.0/c/gstbasesink.html#gst_base_sink_set_max_lateness\">gst_base_sink_set_max_lateness</a> to configure the\nmax-lateness value.</p>\n<p>The <a href=\"../../Miscellaneous.html#GstBaseSink:qos\">GstBaseSink:qos</a> property will enable the quality-of-service features of\nthe basesink which gather statistics about the real-time performance of the\nclock synchronisation. For each buffer received in the sink, statistics are\ngathered and a QOS event is sent upstream with these numbers. This\ninformation can then be used by upstream elements to reduce their processing\nrate, for example.</p>\n<p>The <a href=\"../../Miscellaneous.html#GstBaseSink:async\">GstBaseSink:async</a> property can be used to instruct the sink to never\nperform an ASYNC state change. This feature is mostly usable when dealing\nwith non-synchronized streams or sparse streams.</p>\n\n</div>\n\n\n"});