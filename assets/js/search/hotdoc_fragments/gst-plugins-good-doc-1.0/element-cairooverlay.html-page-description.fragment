fragment_downloaded_cb({"url": "gst-plugins-good-doc-1.0/element-cairooverlay.html#page-description", "fragment": "<div id=\"page-description\" data-hotdoc-source=\"element-cairooverlay\">\n<h1 id=\"cairooverlay1\">cairooverlay</h1><p>cairooverlay renders an overlay using a application provided render function.</p>\n<p>The full example can be found in tests/examples/cairo/cairo_overlay.c</p>\n<h2 id=\"example-code\">Example code</h2>\n<pre><code class=\"language-[\">\n #include &amp;lt;gst/gst.h&amp;gt;\n #include &amp;lt;gst/video/video.h&amp;gt;\n\n ...\n\n typedef struct {\n   gboolean valid;\n   int width;\n   int height;\n } CairoOverlayState;\n\n ...\n\n static void\n prepare_overlay (GstElement * overlay, GstCaps * caps, gpointer user_data)\n {\n   CairoOverlayState *state = (CairoOverlayState *)user_data;\n\n   gst_video_format_parse_caps (caps, NULL, &amp;amp;state-&amp;gt;width, &amp;amp;state-&amp;gt;height);\n   state-&amp;gt;valid = TRUE;\n }\n\n static void\n draw_overlay (GstElement * overlay, cairo_t * cr, guint64 timestamp,\n   guint64 duration, gpointer user_data)\n {\n   CairoOverlayState *s = (CairoOverlayState *)user_data;\n   double scale;\n\n   if (!s-&amp;gt;valid)\n     return;\n\n   scale = 2*(((timestamp/(int)1e7) % 70)+30)/100.0;\n   cairo_translate(cr, s-&amp;gt;width/2, (s-&amp;gt;height/2)-30);\n   cairo_scale (cr, scale, scale);\n\n   cairo_move_to (cr, 0, 0);\n   cairo_curve_to (cr, 0,-30, -50,-30, -50,0);\n   cairo_curve_to (cr, -50,30, 0,35, 0,60 );\n   cairo_curve_to (cr, 0,35, 50,30, 50,0 ); *\n   cairo_curve_to (cr, 50,-30, 0,-30, 0,0 );\n   cairo_set_source_rgba (cr, 0.9, 0.0, 0.1, 0.7);\n   cairo_fill (cr);\n }\n\n ...\n\n cairo_overlay = gst_element_factory_make (&amp;quot;cairooverlay&amp;quot;, &amp;quot;overlay&amp;quot;);\n\n g_signal_connect (cairo_overlay, &amp;quot;draw&amp;quot;, G_CALLBACK (draw_overlay),\n   overlay_state);\n g_signal_connect (cairo_overlay, &amp;quot;caps-changed&amp;quot;,\n   G_CALLBACK (prepare_overlay), overlay_state);\n ...\n\n</code></pre>\n\n</div>\n\n\n"});