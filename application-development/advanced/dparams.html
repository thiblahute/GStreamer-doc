<!DOCTYPE html>
<html lang="en">
<head>

<base href="../..">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Dynamic Controllable Parameters</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/extra_frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/prism.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/scrollspy.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>

<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/trie.js"></script>
<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>

<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
" data-spy="scroll" data-target="#toc" data-offset="70">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<form action="" class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/gstreamer-logo.svg" alt="Home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
				
<li class="dropdown">
    <a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        API References<span class="caret"></span>
    </a>
	<ul class="dropdown-menu" id="modules-menu">
					<li>
				<a href="libgstreamer-1.0/index.html">GStreamer core</a>
			</li>
					<li>
				<a href="libs.html">GStreamer Libraries</a>
			</li>
					<li>
				<a href="plugins_doc.html">GStreamer Plugins</a>
			</li>
		</ul>
</li>

<li>
    <a href="application-development/index.html">Application manual</a>
</li>


<li>
    <a href="tutorials/index.html">Tutorials</a>
</li>

			</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
							</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="GStreamer-1.0" data-hotdoc-ref="application-development/advanced/dparams.html" class="page_container" id="page-wrapper" data-hotdoc-meta-gi-languages="['javascript', 'python', 'c']">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/navigation.js"></script>
	<script src="assets/js/sitemap.js"></script>
</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-source="dparams.md" data-hotdoc-role="main">
        <h1 id="dynamic-controllable-parameters">Dynamic Controllable Parameters</h1>
<h2 id="getting-started">Getting Started</h2>
<p>GStreamer properties are normally set using <code>g_object_set()</code>, but timing these
calls reliably so that the changes affect certain stream times is close to
impossible. The controller subsystem offers a lightweight way to adjust
<code>GObject</code> properties over stream-time.</p>
<p>The controller takes time into account; it works by attaching
<code>GstControlSource</code>s to properties using control-bindings. Control-sources
provide values for a given time-stamp that are usually in the range of 0.0 to 1.0.
Control-bindings map the control-value to the <code>GObject</code> property they are bound
to, converting the type and scaling to the target property's value range. At
run-time the elements continuously pull value changes for the current
stream-time to update the <code>GObject</code> properties. GStreamer already includes a
few different <code>GstControlSource</code>s and control-bindings, but applications can
define their own by sub-classing the respective base classes.</p>
<p>Most parts of the controller mechanism are implemented in <code>GstObject</code>.
The base classes for <code>GstControlSource</code>s and control-bindings are also included
in the core library but the existing implementations are contained within
the <code>gstcontroller</code> library, so you need to include these headers in your
application's source file as needed:</p>
<pre><code class="language-c">#include &lt;gst/gst.h&gt;
#include &lt;gst/controller/gstinterpolationcontrolsource.h&gt;
#include &lt;gst/controller/gstdirectcontrolbinding.h&gt;
...
</code></pre>
<p>Beyond including the proper headers, your application should link to the
<code>gstreamer-controller</code> shared library. To get the required compiler and
liker flags, you can use:</p>
<pre><code>pkg-config --libs --cflags gstreamer-controller-1.0
</code></pre>
<h2 id="setting-up-parameter-control">Setting up parameter control</h2>
<p>If we have our pipeline set up and want to control some parameters, we
first need to create a <code>GstControlSource</code>. Lets use an interpolation
<code>GstControlSource</code>:</p>
<pre><code class="language-c">csource = gst_interpolation_control_source_new ();
g_object_set (csource, "mode", GST_INTERPOLATION_MODE_LINEAR, NULL);
</code></pre>
<p>Now, we need to attach the <code>GstControlSource</code> to the gobject property. This
is done with a control-binding. One control source can be attached to
several object properties (even in different objects) using separate
control-bindings.</p>
<pre><code class="language-c">gst_object_add_control_binding (object, gst_direct_control_binding_new (object, "prop1", csource));
</code></pre>
<p>This type <code>GstControlSource</code> takes new property values from a list of
time-stamped parameter changes. The source can e.g. fill gaps by
smoothing parameter changes. This behavior can be configured by setting
the mode property of the <code>GstControlSource</code>. Other control sources e.g.
produce a stream of values by calling <code>sin()</code> function. They have
parameters to control e.g. the frequency. As <code>GstControlSource</code>s are also
<code>GstObject</code>s, one can attach <code>GstControlSource</code>s to these properties too.</p>
<p>Now we can set some control points. These are time-stamped gdouble
values and are usually in the range of 0.0 to 1.0. A value of 1.0 is
later mapped to the maximum value in the target properties value range.
The values become active when the timestamp is reached. They still stay
in the list. If e.g. the pipeline runs a loop (using a segmented seek),
the control-curve gets repeated as well.</p>
<pre><code class="language-c">GstTimedValueControlSource *tv_csource = (GstTimedValueControlSource *)csource;
gst_timed_value_control_source_set (tv_csource, 0 * GST_SECOND, 0.0);
gst_timed_value_control_source_set (tv_csource, 1 * GST_SECOND, 1.0);
</code></pre>
<p>Now everything is ready to play. If we bound the <code>GstControlSource</code> to a volume
property, we will hear a 1 second fade-in. One word of caution: GStreamer's
stock volume element has a <code>volume</code> property with a range from 0.0 to 10.0. If
the above <code>GstControlSource</code> is attached to this property the volume will ramp
up to 400%!</p>
<p>One final note: the controller subsystem has a built-in live-mode. Even
though a property has a <code>GstControlSource</code> assigned one can set the
<code>GObject</code> property with <code>g_object_set()</code>. This is highly useful when binding
the <code>GObject</code> properties to GUI widgets. When the user adjusts the value with
the widget, one can set the <code>GObject</code> property and this remains active until
the next programmed <code>GstControlSource</code> value overrides it. This also works with
smoothed parameters but it does not work for <code>GstControlSource</code>s that constantly
update the property, like <code>GstLFOControlSource</code>.</p>

    </div>
        




		
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<hr>
	<div id="footer">
		    

	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>

</body>

<script src="assets/js/navbar_offset_scroller.js"></script>
</html>
