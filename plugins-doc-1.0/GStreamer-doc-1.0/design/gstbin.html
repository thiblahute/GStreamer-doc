<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>GstBin</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/devhelp.css" type="text/css">
<link rel="stylesheet" href="assets/css/prism.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/utils.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>
<script src="assets/js/navigation.js"></script>


<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/trie.js"></script>


<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body data-spy="scroll" data-target=".scrollspy" data-offset="70">


<nav class="navbar navbar-fixed-top navbar-default">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a href="https://gstreamer.freedesktop.org/" class="hotdoc-navbar-brand">
				<img src="assets/images/gstreamer-logo.svg" alt="Home" id="home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
							</ul>
		</div>
	</div>
</nav>

<main class="page-row page-row-expanded">
<div data-extension="core" data-hotdoc-project="GStreamer-doc-1.0" data-hotdoc-ref="design/gstbin.html" class="page_container" id="page-wrapper">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2" id="sidenav-column">
	<div class="panel panel-collapse" id="sidenav" data-hotdoc-role="navigation">
		<div id="sidenav-search" role="search">
			<input type="text" class="form-control" placeholder="Fetching index" id="sidenav-lookup-field" disabled>
		</div>
		<div id="sitenav-wrapper" class="mCustomScrollbar" data-mcs-theme="minimal">
			<div class="sidenav-main-panel-body">
				<div id="site-navigation">
				</div>
			</div>
			<!-- FIXME -->
			<div style="height: 76px;"></div>
		</div>
	</div>
</div>

<div class="col-sm-12 col-md-9 col-xl-8">
	<div id="main">
				
<div id="page-description" data-hotdoc-source="gstbin.md">
<h1 id="gstbin">GstBin</h1>
<p><code>GstBin</code> is a container element for other <code>GstElements</code>. This makes it
possible to group elements together so that they can be treated as one
single <code>GstElement</code>. A <code>GstBin</code> provides a <code>GstBus</code> for the children and
collates messages from them.</p>
<h2 id="addremoving-elements">Add/removing elements</h2>
<p>The basic functionality of a bin is to add and remove GstElements
to/from it. <code>gst_bin_add()</code> and <code>gst_bin_remove()</code> perform these
operations respectively.</p>
<p>The bin maintains a parent-child relationship with its elements (see
<a href="relations.html">relations</a>).</p>
<h2 id="retrieving-elements">Retrieving elements</h2>
<p><code>GstBin</code> provides a number of functions to retrieve one or more children
from itself. A few examples of the provided functions:</p>
<ul>
<li><code>gst_bin_get_by_name()</code> retrieves an element by name.</li>
<li><code>gst_bin_iterate_elements()</code> returns an iterator to all the children.</li>
</ul>
<h2 id="element-management">element management</h2>
<p>The most important function of the <code>GstBin</code> is to distribute all
<code>GstElement</code> operations on itself to all of its children. This includes:</p>
<ul>
<li>
<p>state changes</p>
</li>
<li>
<p>index get/set</p>
</li>
<li>
<p>clock get/set</p>
</li>
</ul>
<p>The state change distribution is the most complex and is explained in
<a href="states.html">states</a>.</p>
<h2 id="gstbus">GstBus</h2>
<p>The <code>GstBin</code> creates a <code>GstBus</code> for its children and distributes it when
child elements are added to the bin. The bin attaches a sync handler to
receive messages from children. The bus for receiving messages from
children is distinct from the bin’s own externally-visible <code>GstBus</code>.</p>
<p>Messages received from children are forwarded intact onto the bin’s
external message bus, except for EOS and <code>SEGMENT_START</code>/<code>DONE</code> which are
handled specially.</p>
<p><code>ASYNC_START</code>/<code>ASYNC_STOP</code> messages received from the children are used to
trigger a recalculation of the current state of the bin, as described in
<a href="states.html">states</a>.</p>
<p>The application can retrieve the external <code>GstBus</code> and integrate it in the
mainloop or it can just <code>pop()</code> messages off in its own thread.</p>
<p>When a bin goes to READY it will clear all cached messages.</p>
<h2 id="eos">EOS</h2>
<p>The sink elements will post an EOS message on the bus when they reach
EOS. The EOS message is only posted to the bus when the sink element is
in PLAYING.</p>
<p>The bin collects all EOS messages and forwards it to the application as
soon as all the sinks have posted an EOS.</p>
<p>The list of queued EOS messages is cleared when the bin goes to PAUSED
again. This means that all elements should repost the EOS message when
going to PLAYING again.</p>
<h2 id="segment_startdone">SEGMENT_START/DONE</h2>
<p>A bin collects <code>SEGMENT_START</code> messages but does not post them to the
application. It counts the number of <code>SEGMENT_START</code> messages and posts a
<code>SEGMENT_STOP</code> message to the application when an equal number of
<code>SEGMENT_STOP</code> messages were received.</p>
<p>The cached <code>SEGMENT_START</code>/<code>STOP</code> messages are cleared when going to READY.</p>
<h2 id="duration">DURATION</h2>
<p>When a DURATION query is performed on a bin, it will forward the query
to all its sink elements. The bin will calculate the total duration as
the MAX of all returned durations and will then cache the result so that
any further queries can use the cached version. The reason for caching the
result is because the duration of a stream typically does not change
that often.</p>
<p>A <code>GST_MESSAGE_DURATION_CHANGED</code> posted by an element will clear the
cached duration value so that the bin will query the sinks again. This
message is typically posted by elements that calculate the duration of
the stream based on some average bitrate, which might change while
playing the stream. The <code>DURATION_CHANGED</code> message is posted to the
application, which can then fetch the updated DURATION.</p>
<h2 id="subclassing">Subclassing</h2>
<p>Subclasses of <code>GstBin</code> are free to implement their own add/remove
functions. It is a good idea to update the <code>GList</code> of children so
that the <code>_iterate()</code> functions can still be used if the custom bin
allows access to its children.</p>
<p>Any bin subclass can also implement a custom message handler by
overriding the default one.</p>

</div>


	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
</div>
<div class="hidden-xs col-xl-2">
</div>
	</div>
</div>
</main>

<footer class="page-row">
	<div class="container-fluid">
	<div class="row">
		<div class="hidden-xs hidden-sm col-md-3 col-xl-2"></div>
		<div class="col-sm-12 col-md-9 col-xl-8">
						
		</div>
		<div class="hidden-xs col-xl-2"></div>
	</div>
</div>
</footer>

</body>

<script src="assets/js/navbar_offset_scroller.js"></script>
</html>